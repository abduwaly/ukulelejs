!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(11),u=n(14),l=n(9),s=n(12),c=n(13),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.promiseArray=[],t}return r(t,e),t.prototype.init=function(){var e=this;Promise.all(this.promiseArray).then(function(){e.manageApplication()})},t.prototype.handleElement=function(e){var t=this;this.analyizeElement(e,function(e){t.dispatchEvent(new c.Event(s.UkuEventType.HANDLE_ELEMENT_COMPLETED,e))})},t.prototype.registerController=function(e,t){window[e]=t,this._internal_getDefinitionManager().addControllerDefinition(e,t)},t.prototype.getController=function(e){return this._internal_getDefinitionManager().getControllerDefinition(e).controllerInstance},t.prototype.registerComponent=function(e,t,n){var r=this._internal_getDefinitionManager().addComponentDefinition(e,t,n);this.promiseArray.push(r)},t.prototype.getComponent=function(e){return this._internal_getDefinitionManager().getComponent(e)},t.prototype.getComponentController=function(e){return this._internal_getDefinitionManager().getControllerInstByDomId(e)},t.prototype.refresh=function(e,t){this.dirtyChecker||(this.dirtyChecker=new a.DirtyChecker(this)),this.dirtyChecker.runDirtyChecking(e,t)},t.prototype._internal_getDefinitionManager=function(){return this.defMgr||(this.defMgr=new i.DefinitionManager(this)),this.defMgr},t.prototype._internal_dealWithElement=function(e,t){this.analyizeElement(e,t)},t.prototype.manageApplication=function(){var e=this,t=l.Selector.querySelectorAll(document,"[uku-application]");if(1!==t.length)throw new Error("Only one 'uku-application' can be declared in a whole html.");this.analyizeElement(t[0],function(t){e.dispatchEvent(new c.Event(s.UkuEventType.INITIALIZED,t))})},t.prototype.analyizeElement=function(e,t){var n=new u.Analyzer(this);t&&!function(e){n.addListener(u.Analyzer.ANALYIZE_COMPLETED,function(t){e(t.element)})}(t),n.analyizeElement(e)},t}(o.EventEmitter);p.INITIALIZED="initialized",p.REFRESH="refresh",p.HANDLE_ELEMENT_COMPLETED="handle_element_completed",t.Ukulele=p},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.eventsPool={}}return e.prototype.getEventsPool=function(){return this.eventsPool},e.prototype.addListener=function(e,t){this.eventsPool[e]||(this.eventsPool[e]=[]),this.eventsPool[e].push(t)},e.prototype.removeListener=function(e,t){if(this.eventsPool[e])for(var n=this.eventsPool[e].length-1;n>=0;n--)if(this.eventsPool[e][n]===t){this.eventsPool[e].splice(n,1);break}},e.prototype.hasListener=function(e){return!!(this.eventsPool[e]&&this.eventsPool[e].length>0)},e.prototype.dispatchEvent=function(e){if(e&&e.eventType){var t=this.eventsPool[e.eventType];if(t)for(var n=0;n<t.length;n++)t[n].call(this,e)}},e}();t.EventEmitter=n},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function u(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}l((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:n(0),throw:n(1),return:n(2)}};Object.defineProperty(exports,"__esModule",{value:!0});var ObjectUtil_1=__webpack_require__(3),Ajax_1=__webpack_require__(4),ControllerModel_1=__webpack_require__(5),ComponentModel_1=__webpack_require__(6),ComponentPoolItem_1=__webpack_require__(7),UkuleleUtil_1=__webpack_require__(8),DefinitionManager=function(){function DefinitionManager(e){this.controllersDefinition={},this.componentsDefinition={},this.componentsPool={},this.copyControllers={},this.dependentScriptsCache={},this.ajax=new Ajax_1.Ajax,this.uku=e}return DefinitionManager.prototype.getComponentsDefinition=function(){return this.componentsDefinition},DefinitionManager.prototype.getComponentsPool=function(){return this.componentsPool},DefinitionManager.prototype.setComponentsPool=function(e){this.componentsPool=e},DefinitionManager.prototype.setComponentsDefinition=function(e){this.componentsDefinition=e},DefinitionManager.prototype.getComponentDefinition=function(e){return this.componentsDefinition[e]},DefinitionManager.prototype.getControllerDefinition=function(e){return this.controllersDefinition[e]},DefinitionManager.prototype.getControllersDefinition=function(){return this.controllersDefinition},DefinitionManager.prototype.getComponent=function(e){return this.componentsPool[e]},DefinitionManager.prototype.getCopyControllers=function(){return this.copyControllers},DefinitionManager.prototype.copyAllController=function(){for(var e in this.controllersDefinition){var t=this.controllersDefinition[e],n=t.controllerInstance;this.copyControllerInstance(n,e)}},DefinitionManager.prototype.copyControllerInstance=function(e,t){var n=ObjectUtil_1.ObjectUtil.deepClone(e);delete this.copyControllers[t],this.copyControllers[t]=n},DefinitionManager.prototype.addControllerDefinition=function(e,t){var n=new ControllerModel_1.ControllerModel(e,t);t._alias=e,this.controllersDefinition[e]=n},DefinitionManager.prototype.getControllerInstByDomId=function(e){for(var t in this.controllersDefinition){var n=this.controllersDefinition[t],r=n.controllerInstance;if(r._dom&&r._dom.id===e)return r}},DefinitionManager.prototype.addComponentDefinition=function(e,t,n){var r=this;return new Promise(function(o,i){return n?(r.componentsPool[e]=new ComponentPoolItem_1.ComponentPoolItem(e,t,!1),r.ajax.get(t).then(function(t){var n=UkuleleUtil_1.UkuleleUtil.getComponentConfiguration(t);return r.analyizeComponent(e,n)})):(r.componentsPool[e]=new ComponentPoolItem_1.ComponentPoolItem(e,t,!0),void o())})},DefinitionManager.prototype.addLazyComponentDefinition=function(e,t){var n=this;return new Promise(function(r,o){return n.ajax.get(t).then(function(o){var i=UkuleleUtil_1.UkuleleUtil.getComponentConfiguration(o);return n.analyizeComponent(e,i).then(function(){n.componentsPool[e]={tagName:e,templateUrl:t,lazy:!1},r()})})})},DefinitionManager.prototype.getBoundAttributeValue=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.getControllerModelByName(e),o=[];r.forEach(function(e){o.push(e.controllerInstance)});var i=[this.uku,o,e];i=i.concat(t);var a=UkuleleUtil_1.UkuleleUtil.getFinalValue.apply(null,i);return a},DefinitionManager.prototype.getControllerModelByName=function(e){return this.getBoundControllerModelByName(e)},DefinitionManager.prototype.getFinalValueByExpression=function(e){var t=this.getControllerModelByName(e),n=[];return t.forEach(function(e){n.push(e.controllerInstance)}),UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku,n,e)},DefinitionManager.prototype.getBoundControllerModelByName=function(e){var t=this,n=Object.keys(this.controllersDefinition),r=UkuleleUtil_1.UkuleleUtil.getBoundModelInstantNames(n,e),o=[];return r.forEach(function(e){var n=t.controllersDefinition[e];o.push(n)}),o},DefinitionManager.prototype.analyizeComponent=function(e,t){return __awaiter(this,void 0,void 0,function(){function n(e){return new Promise(function(t,n){if(o.dependentScriptsCache[e])t();else{var r=document.getElementsByTagName("HEAD")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.async=!0,i.src=e,i.onload=function(e){o.dependentScriptsCache[e.target.src]=!0,t()},r.appendChild(i)}})}var r,o,i,a,u,l,s;return __generator(this,function(c){switch(c.label){case 0:return r=t.dependentScripts,o=this,r&&r.length>0?(i=void 0,"function"==typeof window.define&&window.define.amd&&(i=window.define,window.define=void 0),t.componentControllerScript?[3,2]:(a=r[r.length-1],u=t,[4,this.ajax.get(a)])):[3,7];case 1:u.componentControllerScript=c.sent(),r.pop(),c.label=2;case 2:l=0,c.label=3;case 3:return l<r.length?(s=r[l],[4,n(s)]):[3,6];case 4:c.sent(),c.label=5;case 5:return l++,[3,3];case 6:return i&&(window.define=i),this.buildeComponentModel(e,t.template,t.componentControllerScript,t.stylesheet),[2];case 7:return this.buildeComponentModel(e,t.template,t.componentControllerScript,t.stylesheet),[2];case 8:return[2]}})})},DefinitionManager.prototype.buildeComponentModel=function(tag,template,script,style){function dealWithShadowStyle(e,t){var n=document.getElementsByTagName("HEAD")[0],r=document.createElement("style");r.type="text/css";var o=t.split("}"),i=[];o.forEach(function(e,t){var n=e.replace(/^\s*/,"");n&&i.push(n)}),t=i.join("}\n."+e+" "),t="."+e+" "+t+"}",r.innerHTML=t,n.appendChild(r)}var debugComment="//# sourceURL="+tag+".js";try{var controllerClazz=void 0;script&&(script+=debugComment,controllerClazz=eval(script));var newComp=new ComponentModel_1.ComponentModel(tag,template,controllerClazz);this.componentsDefinition[tag]=newComp,style&&dealWithShadowStyle(tag,style)}catch(e){console.error(e)}},DefinitionManager}();exports.DefinitionManager=DefinitionManager},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.getType=function(t){var n=typeof t;return"object"===n&&e.isArray(t)?"array":n},e.compare=function(t,n){var r=e.getType(t),o=e.getType(n),i=!0;if(r!==o)return!1;switch(r){case"object":if(null===t&&null===n)i=!0;else if(null===t||null===n)i=!1;else{var a=Object.keys(t),u=Object.keys(n);if(a.length!=u.length)i=!1;else if(0===a.length&&0===u.length)i=!0;else for(var l in t){var s=t[l],c=n[l],p=e.compare(s,c);if(!p){i=!1;break}}}break;case"array":if(t.length===n.length)for(var f=0;f<t.length;f++){var h=t[f],d=n[f],v=e.compare(h,d);if(!v){i=!1;break}}else i=!1;break;case"function":i=t.toString()===n.toString();break;default:i=t===n}return i},e.deepClone=function(t){var n,r,o;if("object"!=typeof t||null===t)return t;if(t instanceof Array)for(n=[],r=0,o=t.length;r<o;r++)"object"==typeof t[r]&&null!==t[r]?n[r]=e.deepClone(t[r]):n[r]=t[r];else{n={};for(r in t)"object"==typeof t[r]&&null!==t[r]&&"_dom"!==r?n[r]=e.deepClone(t[r]):n[r]=t[r]}return n},e}();t.ObjectUtil=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.get=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?t(r.responseText):n())},r.open("GET",e,!0),r.send(null)})},e}();t.Ajax=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.alias=e,this.controllerInstance=t,this.boundItems=[]}return e.prototype.addBoundItem=function(e){this.boundItems.push(e)},e.prototype.getBoundItemsByName=function(e){for(var t=[],n=0;n<this.boundItems.length;n++){var r=this.boundItems[n];r.attributeName===e&&t.push(r)}return t},e}();t.ControllerModel=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.tagName=e,this.template=t,this.controllerClazz=n}return e}();t.ComponentModel=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.tagName=e,this.templateUrl=t,this.lazy=n}return e}();t.ComponentPoolItem=n},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Selector_1=__webpack_require__(9),ComponentConfiguration_1=__webpack_require__(10),ValueAndParent=function(){function e(e,t){this.value=e,this.parent=t}return e}(),UkuleleUtil=function(){function UkuleleUtil(){}return UkuleleUtil.getFinalAttribute=function(e){var t=e.split("."),n=t.shift();return"parent"===n?UkuleleUtil.getFinalAttribute(t.join(".")):t.join(".")},UkuleleUtil.searchHtmlTag=function(e,t){var n="^<"+t+"[\\s\\S]*>[\\s\\S]*</"+t+">$",r=new RegExp(n),o=e.search(r);return o},UkuleleUtil.getInnerHtml=function(e,t){var n="<"+t+"[\\s\\S]*>[\\s\\S]*</"+t+">",r=new RegExp(n),o=e.match(r);if(o.index>-1){var i=o[0],a=i.search(">"),u=i.substr(a+1),l=u.lastIndexOf("</");return u=u.substring(0,l),u=u.replace(/(^\s*)|(\s*$)/g,"")}return null},UkuleleUtil.getComponentConfiguration=function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=Selector_1.Selector.querySelectorAll(t,"template"),r=Selector_1.Selector.querySelectorAll(t,"script"),o=Selector_1.Selector.querySelectorAll(t,"style"),i=[],a=null,u=0;u<r.length;u++){var l=r[u];""!==l.src?i.push(l.src):a=l.innerHTML}return o&&o[0]?new ComponentConfiguration_1.ComponentConfiguration(n[0].innerHTML,i,a,o[0].innerHTML):new ComponentConfiguration_1.ComponentConfiguration(n[0].innerHTML,i,a)},UkuleleUtil.searchUkuAttrTag=function(e){var t=/^uku\-.*/,n=e.search(t);return n},UkuleleUtil.getAttrFromUkuTag=function(e,t){if(void 0===t&&(t=!1),0===UkuleleUtil.searchUkuAttrTag(e)&&(e=e.replace("uku-","")),t){var n=e.split("-");e=n[0];for(var r=1;r<n.length;r++){var o=n[r].charAt(0).toUpperCase();e=e+o+n[r].substr(1)}}return e},UkuleleUtil.searchUkuExpTag=function(e){var t=/^\{\{.*\}\}$/,n=e.search(t);return n},UkuleleUtil.searchUkuFuncArg=function(e){var t=/\(.*\)$/,n=e.search(t);return n},UkuleleUtil.isRepeat=function(e){return!!e.getAttribute("uku-repeat")},UkuleleUtil.isInRepeat=function(e){for(var t=Selector_1.Selector.parents(e),n=0;n<t.length;n++){var r=t[n];if(9!==r.nodeType){var o=r.getAttribute("uku-repeat");if(o)return!0}}return!1},UkuleleUtil.getBoundModelInstantName=function(e){var t=e.split(".")[0];if(t)return t},UkuleleUtil.getBoundModelInstantNames=function(e,t){var n=[];return e.forEach(function(e){var r=new RegExp("\\b"+e+"\\.","gm");t.search(r)>-1&&n.push(e)}),n},UkuleleUtil.getAttributeFinalValue=function(e,t){var n=UkuleleUtil.getAttributeFinalValueAndParent(e,t),r=n.value;return r},UkuleleUtil.getAttributeFinalValueAndParent=function(e,t){var n,r=e;if("string"==typeof t){var o=UkuleleUtil.getFinalAttribute(t),i=o.split(".");if(""!==o&&r)for(var a=0;a<i.length;a++){var u=i[a];if(n=r,r=r[u],void 0===r||null===r)break}else r=e.hasOwnProperty("_alias")&&e._alias===t?e:t}return new ValueAndParent(r,n)},UkuleleUtil.getFinalValue=function(uku,objects,attrName){for(var additionalArgu=[],_i=3;_i<arguments.length;_i++)additionalArgu[_i-3]=arguments[_i];return function(){var tempScope={};objects.forEach(function(e){tempScope[e._alias]=e;var t=new RegExp("\\b"+e._alias+"\\.","gm");attrName=attrName.replace(t,"tempScope."+e._alias+".")});var result=eval(attrName);return tempScope=null,result}()},UkuleleUtil}();exports.UkuleleUtil=UkuleleUtil},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.querySelectorAll=function(e,t){return window.hasOwnProperty("jQuery")&&"undefined"!=typeof window.jQuery?window.jQuery(e).find(t):e.querySelectorAll(t)},e.fuzzyFind=function(e,t){if(e&&e.attributes)for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n];if(r.nodeName.search(t)>-1)return e}return null},e.directText=function(e,t){for(var n="",r=e.childNodes,o=0;o<=r.length-1;o++){var i=r[o];if(3===i.nodeType){if(t||""===t||0===t||t===!1)return void(i.nodeValue=t);n+=i.nodeValue}}return n.trim()},e.parents=function(e){for(var t=[];e.parentNode&&"BODY"!==e.parentNode.tagName;)t.push(e.parentNode),e=e.parentNode;return t},e}();t.Selector=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r){void 0===r&&(r=void 0),this.template=e,this.dependentScripts=t,this.componentControllerScript=n,this.stylesheet=r}return e}();t.ComponentConfiguration=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=n(3),i=n(12),a=n(13),u=function(){function e(e){this.uku=e,this.defMgr=this.uku._internal_getDefinitionManager()}return e.prototype.runDirtyChecking=function(e,t){function n(e){var n=u.defMgr.getControllersDefinition()[e];if(!n)return void(u.uku.parentUku&&u.uku.parentUku.refresh(e));for(var l=n.controllerInstance,s=u.defMgr.getCopyControllers()[e],c=0,p=0;p<n.boundItems.length;p++){var f=n.boundItems[p],h=f.attributeName;if(h.search("parent.")>-1)return;if(s){f.hasOwnProperty("ukuTag")&&"selected"===f.ukuTag&&(h=h.split("|")[0]);var d=r.UkuleleUtil.getFinalValue(u.uku,[l],h),v=r.UkuleleUtil.getFinalValue(u.uku,[s],h);if(!o.ObjectUtil.compare(v,d)){h=f.attributeName;for(var m=n.getBoundItemsByName(h),g=0;g<m.length;g++){var y=m[g];(y.element!==t||f.hasOwnProperty("ukuTag")&&"value"!==y.ukuTag)&&(c++,y.render([l]))}}}}c>0&&u.uku.hasListener(i.UkuEventType.REFRESH)&&u.uku.dispatchEvent(new a.Event(i.UkuEventType.REFRESH)),u.defMgr.copyControllerInstance(l,e)}var u=this;if(e){if("string"==typeof e)n(e);else if(o.ObjectUtil.isArray(e))for(var l=0;l<e.length;l++)n(e[l])}else for(var s in this.defMgr.getControllersDefinition())n(s)},e}();t.DirtyChecker=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e}();n.INITIALIZED="initialized",n.REFRESH="refresh",n.HANDLE_ELEMENT_COMPLETED="handle_element_completed",t.UkuEventType=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.eventType=e,this.element=t}return e}();t.Event=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function u(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}l((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:n(0),throw:n(1),return:n(2)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),u=n(8),l=n(15),s=n(26),c=n(27),p=n(28),f=n(29),h=n(30),d=n(31),v=n(9),m=n(13),g=function(e){function t(t){var n=e.call(this)||this;return n.dealWithAttribute=function(e,t){var n=this,r=e.getAttribute("uku-"+t),o=this.defMgr.getControllerModelByName(r);if(o&&o.length>0){var i=l.BoundItemAttributeFactory.getInstance().generateInstance(r,t,e,this.uku),a=[];o.forEach(function(r){r.addBoundItem(i),h.elementChangedBinder(e,t,r,n.uku.refresh,n.uku),a.push(r.controllerInstance)}),i.render(a)}},n.uku=t,n.defMgr=n.uku._internal_getDefinitionManager(),n}return r(t,e),t.prototype.analyizeElement=function(e){var n=this;this.searchComponent(e).then(function(e){n.searchExpression(e),n.searchUkuAttribute(e),n.defMgr.copyAllController(),n.hasListener(t.ANALYIZE_COMPLETED)&&n.dispatchEvent(new m.Event(t.ANALYIZE_COMPLETED,e))})},t.prototype.sortAttributes=function(e){for(var t=[],n=0;n<e.attributes.length;n++){var r=e.attributes[n];r.nodeName.search("uku-on")!==-1?t.push(r):t.unshift(r)}return t},t.prototype.searchUkuAttribute=function(e){var t=[],n=v.Selector.fuzzyFind(e,"uku-");n&&t.push(n);for(var r=v.Selector.querySelectorAll(e,"*"),o=0;o<r.length;o++){var i=r[o],a=v.Selector.fuzzyFind(i,"uku-");a&&!u.UkuleleUtil.isInRepeat(a)&&t.push(a)}for(var l=0;l<t.length;l++)for(var s=t[l],c=this.sortAttributes(s),p=0;p<c.length;p++){var f=c[p];if(u.UkuleleUtil.searchUkuAttrTag(f.nodeName)>-1){var h=f.nodeName.split("-");h.shift();var d=h.join("-");"application"!==d&&(0===d.search("on")?u.UkuleleUtil.isRepeat(s)||u.UkuleleUtil.isInRepeat(s)||this.dealWithEvent(s,d):d.search("repeat")!==-1?this.dealWithRepeat(s):u.UkuleleUtil.isRepeat(s)||u.UkuleleUtil.isInRepeat(s)||("text"!==d?this.dealWithAttribute(s,d):this.dealWithInnerText(s)))}}},t.prototype.searchComponent=function(e){return o(this,void 0,void 0,function(){var t,n,r,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return(t=this.defMgr.getComponent(e.localName))?t.lazy?[3,1]:(n=e.attributes,r=this.defMgr.getComponentsDefinition()[t.tagName],u.UkuleleUtil.isRepeat(e)||u.UkuleleUtil.isInRepeat(e)?[2,e]:[2,this.dealWithComponent(e,r.template,r.controllerClazz,n)]):[3,4];case 1:return[4,this.defMgr.addLazyComponentDefinition(t.tagName,t.templateUrl)];case 2:return i.sent(),n=e.attributes,r=this.defMgr.getComponentsDefinition()[t.tagName],u.UkuleleUtil.isRepeat(e)||u.UkuleleUtil.isInRepeat(e)?[2,e]:[2,this.dealWithComponent(e,r.template,r.controllerClazz,n)];case 3:return[3,10];case 4:if(!(e.children&&e.children.length>0))return[3,9];o=0,i.label=5;case 5:return o<e.children.length?(a=e.children[o],[4,this.searchComponent(a)]):[3,8];case 6:i.sent(),i.label=7;case 7:return o++,[3,5];case 8:return[2,e];case 9:return[2,e];case 10:return[2]}})})},t.prototype.dealWithComponent=function(e,t,n,r){return o(this,void 0,void 0,function(){var o,a,l,s,c,p,h,h,d,v,m;return i(this,function(i){switch(i.label){case 0:if(o="cc_"+Math.floor(1e4*Math.random()).toString(),t=t.replace(new RegExp("'cc\\.","gm"),"'"+o+"."),t=t.replace(new RegExp('"cc\\.',"gm"),'"'+o+"."),t=t.replace(new RegExp("{{cc\\.","gm"),"{{"+o+"."),t=t.replace(new RegExp(" cc\\.","gm")," "+o+"."),t=t.replace(new RegExp("\\(cc\\.","gm"),"("+o+"."),t=t.replace(new RegExp("\\,cc\\.","gm"),","+o+"."),t=t.replace(new RegExp("\\.cc\\.","gm"),"."+o+"."),a=document.createElement("div"),a.insertAdjacentHTML("afterBegin",t),a.children.length>1&&(t=a.outerHTML),e.insertAdjacentHTML("beforeBegin",t),l=e.previousElementSibling,l.classList.add(e.localName),n)for(s=new n(this.uku),s._dom=l,s.fire=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0);var o=new CustomEvent(e.toLowerCase(),{bubbles:n,cancelable:r});o.data=t,s._dom.dispatchEvent(o)},this.uku.registerController(o,s),c=function(e){var t=r[e];if(0!==u.UkuleleUtil.searchUkuAttrTag(t.nodeName)||t.nodeName.search("uku-on")!==-1||"uku-render"===t.nodeName||"uku-visible"===t.nodeName)l.setAttribute(t.nodeName,t.nodeValue);else{var n=u.UkuleleUtil.getAttrFromUkuTag(t.nodeName,!0),o=p.defMgr.getControllerModelByName(t.nodeValue);if(o&&o.length>0){var i=new f.BoundItemComponentAttribute(t.nodeValue,n,s,p.uku),a=[];o.forEach(function(e){e.addBoundItem(i),a.push(e.controllerInstance)}),i.render(a)}}},p=this,h=0;h<r.length;h++)c(h);else for(h=0;h<r.length;h++)d=r[h],0===u.UkuleleUtil.searchUkuAttrTag(d.nodeName)&&d.nodeName.search("uku-on")===-1&&"uku-render"!==d.nodeName&&"uku-visible"!==d.nodeName||l.setAttribute(d.nodeName,d.nodeValue);if(e.parentNode.removeChild(e),!(l.children&&l.children.length>0))return[3,5];v=0,i.label=1;case 1:return v<l.children.length?(m=l.children[v],[4,this.searchComponent(m)]):[3,4];case 2:i.sent(),i.label=3;case 3:return v++,[3,1];case 4:return s&&s._initialized&&"function"==typeof s._initialized&&s._initialized(o,s._dom),[2,l];case 5:return s&&s._initialized&&"function"==typeof s._initialized&&s._initialized(o,s._dom),[2,l]}})})},t.prototype.searchExpression=function(e){u.UkuleleUtil.searchUkuExpTag(v.Selector.directText(e))!==-1&&(u.UkuleleUtil.isRepeat(e)||u.UkuleleUtil.isInRepeat(e)||this.dealWithExpression(e));for(var t=0;t<e.children.length;t++)this.searchExpression(e.children[t])},t.prototype.dealWithExpression=function(e){var t=v.Selector.directText(e);if(u.UkuleleUtil.searchUkuExpTag(t)!==-1){var n=t.slice(2,-2),r=this.defMgr.getControllerModelByName(n);if(r&&r.length>0){var o=new s.BoundItemExpression(n,t,e,this.uku),i=[];r.forEach(function(e){e.addBoundItem(o),i.push(e.controllerInstance)}),o.render(i)}}},t.prototype.dealWithInnerText=function(e){var t=e.getAttribute("uku-text");if(t){var n=this.defMgr.getControllerModelByName(t);if(n&&n.length>0){var r=new c.BoundItemInnerText(t,e,this.uku),o=[];n.forEach(function(e){e.addBoundItem(r),o.push(e.controllerInstance)}),r.render(o)}}},t.prototype.dealWithEvent=function(e,t){var n=this,r=e.getAttribute("uku-"+t),o=t.substring(2);o=o.toLowerCase();var i=this.defMgr.getControllerModelByName(r);i&&i.length>0&&d.EventListener.addEventListener(e,o,function(t){var o=[];i.forEach(function(e){o.push(e.alias),n.defMgr.copyControllerInstance(e.controllerInstance,e.alias)}),n.defMgr.getBoundAttributeValue(r,t),n.uku.refresh(o,e)})},t.prototype.dealWithRepeat=function(e){var t=e.getAttribute("uku-repeat"),n=t.split(" in "),r=n[0],o=n[1],i=this.defMgr.getControllerModelByName(o);if(i&&i.length>0){var a=[],u=new p.BoundItemRepeat(o,r,e,this.uku);i.forEach(function(e){e.addBoundItem(u),a.push(e.controllerInstance)}),u.render(a)}},t}(a.EventEmitter);g.ANALYIZE_COMPLETED="analyizeCompleted",t.Analyzer=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n(19),i=n(20),a=n(21),u=n(22),l=n(23),s=n(24),c=n(25),p=n(17),f=function(){function e(){if(e._instance)throw new Error("Error: Instantiation failed: Use BoundItemAttributeFactory.getInstance() instead of new.");e._instance=this}return e.getInstance=function(){return e._instance},e.prototype.generateInstance=function(e,t,n,f){var h;switch(t){case"selected":h=new r.BountItemAttrSelected(e,t,n,f);break;case"data-item":h=new o.BoundItemAttrDataItem(e,t,n,f);break;case"src":h=new i.BoundItemAttrSrc(e,t,n,f);break;case"disabled":h=new a.BoundItemAttrDisabled(e,t,n,f);break;case"render":h=new u.BoundItemAttrRender(e,t,n,f);break;case"style":h=new l.BoundItemAttrStyle(e,t,n,f);break;case"value":h=new s.BoundItemAttrValue(e,t,n,f);break;case"visible":h=new c.BoundItemAttrVisible(e,t,n,f);break;default:h=new p.BoundItemAttribute(e,t,n,f)}return h},e}();f._instance=new f,t.BoundItemAttributeFactory=f},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=n(8),a=function(e){function t(t,n,r,o){var i=this;if("selected"!==n)throw new TypeError("it doesn't use uku-selected");return i=e.call(this,t,n,r,o)||this}return r(t,e),t.prototype.render=function(e){var t,n=this.attributeName,r=this.element.tagName;if("SELECT"===r){var o=this.attributeName.split("|");n=o[0],t=o[1];var a=i.UkuleleUtil.getFinalValue(this.uku,e,n),u=void 0;u=t?a[t]:a,this.element.value=u}if("INPUT"===r&&"radio"===this.element.getAttribute("type")){var a=i.UkuleleUtil.getFinalValue(this.uku,e,n);this.element.value===a&&this.element.setAttribute("checked","true")}},t}(o.BoundItemAttribute);t.BountItemAttrSelected=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(8),a=function(e){function t(t,n,r,o){var i=e.call(this,t,r,o)||this;return i.ukuTag=n,i}return r(t,e),t.prototype.render=function(e){var t=this.attributeName,n=i.UkuleleUtil.getFinalValue(this.uku,e,t);this.element.setAttribute(this.ukuTag,n)},t}(o.BoundItemBase);t.BoundItemAttribute=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.attributeName=e,this.element=t,this.uku=n}return e.prototype.render=function(e){},e}();t.BoundItemBase=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=n(8),a=function(e){function t(t,n,r,o){var i=this;if("data-item"!==n)throw new TypeError("it doesn't use uku-item");return i=e.call(this,t,n,r,o)||this}return r(t,e),t.prototype.render=function(e){var t=this.attributeName,n=this.element.tagName,r=i.UkuleleUtil.getFinalValue(this.uku,e,t);"OPTION"===n&&(r=JSON.stringify(r),this.element.setAttribute("data-item",r))},t}(o.BoundItemAttribute);t.BoundItemAttrDataItem=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=n(8),a=function(e){function t(t,n,r,o){var i=this;if("src"!==n)throw new TypeError("it doesn't use uku-src");return i=e.call(this,t,n,r,o)||this}return r(t,e),t.prototype.render=function(e){var t=this.attributeName,n=this.element.tagName,r=i.UkuleleUtil.getFinalValue(this.uku,e,t);if("IMG"!==n)throw new Error("uku-src doesn't work with current dom");r&&this.element.setAttribute(this.ukuTag,r)},t}(o.BoundItemAttribute);t.BoundItemAttrSrc=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);
};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=n(8),a=function(e){function t(t,n,r,o){var i=this;if("disabled"!==n)throw new TypeError("it doesn't use uku-disabled");return i=e.call(this,t,n,r,o)||this}return r(t,e),t.prototype.render=function(e){var t=this.attributeName,n=(this.element.tagName,i.UkuleleUtil.getFinalValue(this.uku,e,t));this.element.disabled=n},t}(o.BoundItemAttribute);t.BoundItemAttrDisabled=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=n(8),a=function(e){function t(t,n,r,o){var i=this;if("render"!==n)throw new TypeError("it doesn't use uku-render");return i=e.call(this,t,n,r,o)||this}return r(t,e),t.prototype.render=function(e){var t=this.attributeName,n=(this.element.tagName,i.UkuleleUtil.getFinalValue(this.uku,e,t));if(n){var r=this.element.getAttribute("data-old-display");null!==r&&(this.element.style.display=r)}else{var r=this.element.getAttribute("data-old-display");null===r&&(r=this.element.style.display,this.element.setAttribute("data-old-display",r)),this.element.style.display="none"}},t}(o.BoundItemAttribute);t.BoundItemAttrRender=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=n(8),a=function(e){function t(t,n,r,o){var i=this;if("style"!==n)throw new TypeError("it doesn't use uku-style");return i=e.call(this,t,n,r,o)||this}return r(t,e),t.prototype.render=function(e){var t=this.attributeName,n=(this.element.tagName,i.UkuleleUtil.getFinalValue(this.uku,e,t));for(var r in n)this.element.style[r]=n[r]},t}(o.BoundItemAttribute);t.BoundItemAttrStyle=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=n(8),a=function(e){function t(t,n,r,o){var i=this;if("value"!==n)throw new TypeError("it doesn't use uku-value");return i=e.call(this,t,n,r,o)||this}return r(t,e),t.prototype.render=function(e){var t=this.attributeName,n=this.element.tagName,r=i.UkuleleUtil.getFinalValue(this.uku,e,t);"INPUT"===n&&"checkbox"===this.element.getAttribute("type")?this.element.checked=r:this.element.value=r},t}(o.BoundItemAttribute);t.BoundItemAttrValue=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=n(8),a=function(e){function t(t,n,r,o){var i=this;if("visible"!==n)throw new TypeError("it doesn't use uku-visible");return i=e.call(this,t,n,r,o)||this}return r(t,e),t.prototype.render=function(e){var t=this.attributeName,n=(this.element.tagName,i.UkuleleUtil.getFinalValue(this.uku,e,t));n?this.element.style.visibility="visible":this.element.style.visibility="hidden"},t}(o.BoundItemAttribute);t.BoundItemAttrVisible=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(8),a=n(9),u=function(e){function t(t,n,r,o){var i=e.call(this,t,r,o)||this;return i.expression=n,i}return r(t,e),t.prototype.render=function(e){var t=i.UkuleleUtil.getFinalValue(this.uku,e,this.attributeName);a.Selector.directText(this.element,t)},t}(o.BoundItemBase);t.BoundItemExpression=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(8),a=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.tagName="text",o}return r(t,e),t.prototype.render=function(e){var t=i.UkuleleUtil.getFinalValue(this.uku,e,this.attributeName);this.element.innerHTML=t},t}(o.BoundItemBase);t.BoundItemInnerText=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(8),a=function(e){function t(t,n,r,o){var i=e.call(this,t,r,o)||this;return i.expression=n,i.renderTemplate=r.outerHTML,i.parentElement=r.parentNode,i.beginCommentString=void 0,i.endCommentString=void 0,i}return r(t,e),t.prototype.render=function(e){function t(){var e=i.UkuleleUtil.searchHtmlTag(o.renderTemplate,"tr");return e===-1?document.createElement("div"):document.createElement("tbody")}var n=this,r=i.UkuleleUtil.getFinalValue(this.uku,e,this.attributeName);if(r){var o=this;if(this.element&&this.element.parentNode){this.beginCommentString="begin uku-repeat: "+this.expression+" in "+this.attributeName;var a=document.createComment(this.beginCommentString);this.element.parentNode.insertBefore(a,this.element),this.endCommentString="end uku-repeat: "+this.expression+" in "+this.attributeName;var u=document.createComment(this.endCommentString);this.element.parentNode.insertBefore(u,this.element.nextSibling),this.element.parentNode.removeChild(this.element)}var l={acceptNode:function(e){return e.nodeValue===o.beginCommentString?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}},s=l.acceptNode;s.acceptNode=l.acceptNode;for(var c=document.createTreeWalker(this.parentElement,NodeFilter.SHOW_COMMENT,s,!1);c.nextNode();){var p=c.currentNode;if(p&&p.nodeValue===this.beginCommentString){for(;p.nextSibling&&p.nextSibling.nodeValue!==this.endCommentString;)p.parentNode.removeChild(p.nextSibling);var f=t(),h=t();p.parentNode.insertBefore(h,p.nextSibling);for(var d=0;d<r.length;d++)if(f.insertAdjacentHTML("beforeEnd",this.renderTemplate),d===r.length-1){var v=f.innerHTML;h.insertAdjacentHTML("beforeBegin",v),p.parentNode.removeChild(h),f=null,h=null}for(var m=p.nextSibling,g=0;g<r.length;g++){m.removeAttribute("uku-repeat");var y=this.uku.constructor,_=new y;_.parentUku=this.uku;var b=_.parentUku._internal_getDefinitionManager().getComponentsDefinition(),k=_.parentUku._internal_getDefinitionManager().getComponentsPool();_._internal_getDefinitionManager().setComponentsDefinition(b),_._internal_getDefinitionManager().setComponentsPool(k);var U=m.nextSibling,w=typeof r[g];if("object"===w)_.registerController(this.expression,r[g]);else{_.registerController(this.expression,{value:r[g]});var C=m.outerHTML.replace(new RegExp(this.expression,"gm"),this.expression+".value");m.insertAdjacentHTML("afterend",C);var E=m.nextSibling;m.parentNode.removeChild(m),m=E}_._internal_dealWithElement(m,function(e){if("OPTION"===n.element.tagName){var t=n.parentElement.getAttribute("uku-selected"),r=t.split("|");t=r[0];var o=r[1],i=n.uku._internal_getDefinitionManager().getFinalValueByExpression(t);o?n.parentElement.value=i[o]:n.parentElement.value=i}}),m=U}}}}},t}(o.BoundItemBase);t.BoundItemRepeat=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(8),a=function(e){function t(t,n,r,o){var i=e.call(this,t,null,o)||this;return i.ukuTag=n,i.componentController=r,i}return r(t,e),t.prototype.render=function(e){var t=i.UkuleleUtil.getFinalValue(this.uku,e,this.attributeName);this.componentController[this.ukuTag]=t,this.uku.refresh(this.componentController._alias)},t}(o.BoundItemBase);t.BoundItemComponentAttribute=a},function(e,t,n){"use strict";function r(e,t,n,r,i){for(var c=[o,a,u,l,s],p=0;p<c.length;p++){var f=c[p],h=f.apply(this,arguments);if(h)break}}function o(e,t,n,r,o){var a=e.tagName;if("INPUT"===a&&i(e)&&"value"===t){var u="change",l=e.getAttribute("type");return"text"===l&&(u="input"),p.EventListener.addEventListener(e,u,function(i){var a=e.getAttribute("uku-"+t);a=c.UkuleleUtil.getFinalAttribute(a);for(var u=a.split("."),l=n.controllerInstance,s=0;s<u.length-1;s++)l=l[u[s]];l[u[u.length-1]]=e.value,r&&r.call(o,n.alias,e)}),!0}return!1}function i(e){var t=e.getAttribute("type");return"checkbox"!==t&&"radio"!==t}function a(e,t,n,r,o){var i=e.tagName;return"TEXTAREA"===i&&"value"===t&&(p.EventListener.addEventListener(e,"input",function(i){var a=e.getAttribute("uku-"+t);a=c.UkuleleUtil.getFinalAttribute(a);for(var u=a.split("."),l=n.controllerInstance,s=0;s<u.length-1;s++)l=l[u[s]];l[u[u.length-1]]=e.value,r&&r.call(o,n.alias,e)}),!0)}function u(e,t,n,r,o){var i=e.tagName;return"SELECT"===i&&"selected"===t&&(p.EventListener.addEventListener(e,"change",function(i){var a,u=e.getAttribute("uku-"+t),l=u.split("|");u=l[0],a=l[1],u=c.UkuleleUtil.getFinalAttribute(u);for(var s=u.split("."),p=n.controllerInstance,h=0;h<s.length-1;h++)p=p[s[h]];for(var d=f.Selector.querySelectorAll(e,"option"),v=0;v<d.length;v++){var m=d[v];if(m.selected){var g=JSON.parse(m.getAttribute("data-item"));p[s[s.length-1]]=g}}r&&r.call(o,n.alias,e)}),!0)}function l(e,t,n,r,o){var i=e.tagName;return"INPUT"===i&&"value"===t&&"checkbox"===e.getAttribute("type")&&(p.EventListener.addEventListener(e,"change",function(i){var a=e.getAttribute("uku-"+t);a=c.UkuleleUtil.getFinalAttribute(a);for(var u=a.split("."),l=n.controllerInstance,s=0;s<u.length-1;s++)l=l[u[s]];l[u[u.length-1]]=e.checked,r&&r.call(o,n.alias,e)}),!0)}function s(e,t,n,r,o){var i=e.tagName;return"INPUT"===i&&"selected"===t&&"radio"===e.getAttribute("type")&&(p.EventListener.addEventListener(e,"change",function(i){var a=e.getAttribute("uku-"+t);a=c.UkuleleUtil.getFinalAttribute(a);for(var u=a.split("."),l=n.controllerInstance,s=0;s<u.length-1;s++)l=l[u[s]];e.checked&&(l[u[u.length-1]]=e.value,r&&r.call(o,n.alias,e))}),!0)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(8),p=n(31),f=n(9);t.elementChangedBinder=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.addEventListener=function(e,t,n){return window.hasOwnProperty("jQuery")&&void 0!==typeof window.jQuery?window.jQuery(e).on(t,function(e){n&&n(e)}):e.addEventListener(t,n)},e}();t.EventListener=n}])});
//# sourceMappingURL=uku.js.map